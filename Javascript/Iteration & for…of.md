## 1. Iteration Protocol

---

ë°ì´í„° ì»¬ë ‰ì…˜ì„ ìˆœíšŒí•˜ê¸° ìœ„í•œ í”„ë¡œí† ì½œ ( ë¯¸ë¦¬ ì•½ì†ëœ ê·œì¹™ ) ì´ë‹¤.
ì´í„°ë ˆì´ì…˜ í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•œ ê°ì²´ëŠ” forâ€¦of ë¬¸ìœ¼ë¡œ ìˆœíšŒê°€ ê°€ëŠ¥í•˜ê³ ,
Spread ë¬¸ë²•ì˜ í”¼ì—°ì‚°ìê°€ ë  ìˆ˜ ìˆë‹¤.

ì´í„°ë ˆì´ì…˜ í”„ë¡œí† ì½œì—ëŠ” ì´í„°ëŸ¬ë¸” í”„ë¡œí† ì½œ(iterable protocol)ê³¼ ì´í„°ë ˆì´í„° í”„ë¡œí† ì½œ(iterator protocol)ì´ ìˆë‹¤.

### 1.1 Iterable

---

ì´í„°ëŸ¬ë¸” í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•œ ê°ì²´ë¥¼ ì´í„°ëŸ¬ë¸”ì´ë¼ê³  í•œë‹¤.
ì´í„°ëŸ¬ë¸”ì€ Symbol.iterator ë©”ì†Œë“œë¥¼ êµ¬í˜„í•˜ê±°ë‚˜ í”„ë¡œí† íƒ€ì… ì²´ì¸ì— ì˜í•´ ìƒì†í•œ ê°ì²´ë¥¼ ë§í•œë‹¤. Symbol.iterator ë©”ì†Œë“œëŠ” ì´í„°ë ˆì´í„°ë¥¼ ë°˜í™˜í•œë‹¤.
ì´í„°ëŸ¬ë¸”ì€ forâ€¦ofë¬¸ì—ì„œ ìˆœíšŒí•  ìˆ˜ ìˆìœ¼ë©° Spreadë¬¸ë²•ì˜ ëŒ€ìƒìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

ë°°ì—´ì€ Symbol.iterator ë©”ì†Œë“œë¥¼ ì†Œìœ í•œë‹¤. ë”°ë¼ì„œ ë°°ì—´ì€ ì´í„°ëŸ¬ë¸” í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•œ ì´í„°ëŸ¬ë¸”ì´ë‹¤.

```jsx
const array = [1,2,3];

// ë°°ì—´ì€ Symbol.iterator ë©”ì†Œë“œë¥¼ ì†Œìœ í•œë‹¤.
// ë”°ë¼ì„œ ë°°ì—´ì€ ì´í„°ëŸ¬ë¸” í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•œ ì´í„°ëŸ¬ë¸”ì´ë‹¤.
console.log(Symbol.iterator in array); // true

// ì´í„°ëŸ¬ë¸” í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•œ ë°°ì—´ì€ for...of ë¬¸ì—ì„œ ìˆœíšŒ ê°€ëŠ¥í•˜ë‹¤.
for(const item of array) {
  console.log(item) // 1,2,3
}
```

ì¼ë°˜ ê°ì²´ëŠ” Symbol.iterator ë©”ì†Œë“œë¥¼ ì†Œìœ í•˜ì§€ ì•ŠëŠ”ë‹¤. 
ë”°ë¼ì„œ ì¼ë°˜ ê°ì²´ëŠ” ì´í„°ëŸ¬ë¸” í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•œ ì´í„°ëŸ¬ë¸”ì´ ì•„ë‹ˆë‹¤.

```jsx
const obj = {a:1, b:2}

console.log(Symbol.iterator in obj); // false
```

ì¼ë°˜ ê°ì²´ë„ ì´í„°ëŸ¬ë¸” í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•˜ë„ë¡ êµ¬í˜„í•˜ë©´ ì´í„°ëŸ¬ë¸”ì´ ëœë‹¤.

### 1.2 Iterator

---

ì´í„°ë ˆì´í„° í”„ë¡œí† ì½œì€ next ë©”ì†Œë“œë¥¼ ì†Œìœ í•˜ë©° next ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ë©´
ì´í„°ëŸ¬ë¸”ì„ ìˆœíšŒí•˜ë©° value, done í”„ë¡œí¼í‹°ë¥¼ ê°–ëŠ” ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´ë¥¼ ë°˜í™˜í•˜ëŠ” ê²ƒì´ë‹¤. ì´ ê·œì•½ì„ ì¤€ìˆ˜í•œ ê°ì²´ê°€ ì´í„°ë ˆì´í„°ì´ë‹¤.

ì´í„°ëŸ¬ë¸” í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•œ ì´í„°ëŸ¬ë¸”ì€ Symbol.iterator ë©”ì†Œë“œë¥¼ ì†Œìœ í•œë‹¤.
ì´ ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ì´í„°ë ˆì´í„°ë¥¼ ë°˜í™˜í•œë‹¤. ì´í„°ë ˆì´í„° í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•œ ì´í„°ë ˆì´í„°ëŠ” next ë©”ì†Œë“œë¥¼ ê°–ëŠ”ë‹¤.

```jsx
const arr = [1,2,3];

const iterator = arr[Symbol.iterator]();

// ì´í„°ë ˆì´í„° í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•œ ì´í„°ë ˆì´í„°ëŠ” next ë©”ì†Œë“œë¥¼ ê°–ëŠ”ë‹¤.
console.log('next' in iterator); // true
```

ì´í„°ë ˆì´í„°ì˜ next ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ë©´ value, done í”„ë¡œí¼í‹°ë¥¼ ê°–ëŠ” **ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸( iterator result ) ê°ì²´ë¥¼ ë°˜í™˜**í•œë‹¤.

```jsx
const arr = [1,2,3];

const iterator = arr[Symbol.iterator]();

let iteratorResult = iterator.next();
console.log(iteratorResult); // { value: 1, done: false }
```

ì´í„°ë ˆì´í„°ì˜ next ë©”ì†Œë“œëŠ” ì´í„°ëŸ¬ë¸”ì˜ ê° ìš”ì†Œë¥¼ ìˆœíšŒí•˜ê¸° ìœ„í•œ í¬ì¸í„°ì˜ ì—­í• ì„ í•œë‹¤. next ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ì´í„°ëŸ¬ë¸”ì„ ìˆœì°¨ì ìœ¼ë¡œ í•œ ë‹¨ê³„ì”© ìˆœíšŒí•˜ë©° ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.

ì´í„°ë ˆì´í„°ì˜ next ë©”ì†Œë“œê°€ ë°˜í™˜í•˜ëŠ” ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´ì˜ value í”„ë¡œí¼í‹°ëŠ” í˜„ì¬ ìˆœíšŒ ì¤‘ì¸ ì´í„°ëŸ¬ë¸”ì˜ ê°’ì„ ë°˜í™˜í•˜ê³  done í”„ë¡œí¼í‹°ëŠ” ì´í„°ëŸ¬ë¸”ì˜ ìˆœíšŒ ì™„ë£Œ ì—¬ë¶€ë¥¼ ë°˜í™˜í•œë‹¤.

### 1.3 ë¹ŒíŠ¸ì¸ ì´í„°ëŸ¬ë¸”

---

ES6ì—ì„œ ì œê³µí•˜ëŠ” ë¹ŒíŠ¸ì¸ ì´í„°ëŸ¬ë¸”

> Array, String, Map, Set, TypedArray(Int8Array, Uint8Array, Uint8ClampedArray, Int16Array, Int32Array, Uint32Array, Float32Array, Float64Array), DOM data structure(NodeList, HTMLCollection), Arguments
> 

### 1.4 ì´í„°ë ˆì´ì…˜ í”„ë¡œí† ì½œì˜ í•„ìš”ì„±

---

ë°ì´í„° ì†Œë¹„ì(Data consumer)ì¸ forâ€¦of ë¬¸, Spreadë¬¸ë²• ë“±ì€ ë¹ŒíŠ¸ì¸ ì´í„°ëŸ¬ë¸”ì„ ì‚¬ìš©í•œë‹¤. ì¦‰, ì´í„°ëŸ¬ë¸”ì€ ë°ì´í„° ê³µê¸‰ì(Data provider)ì˜ ì—­í• ì„ í•œë‹¤.

ë§Œì•½ ì´ì²˜ëŸ¼ ë‹¤ì–‘í•œ ë°ì´í„° ì†ŒìŠ¤ê°€ ê°ìì˜ ìˆœíšŒ ë°©ì‹ì„ ê°–ëŠ”ë‹¤ë©´ ë°ì´í„° ì†Œë¹„ìëŠ” ë‹¤ì–‘í•œ ë°ì´í„° ì†ŒìŠ¤ì˜ ìˆœíšŒ ë°©ì‹ì„ ëª¨ë‘ ì§€ì›í•´ì•¼ í•œë‹¤. ì´ëŠ” íš¨ìœ¨ì ì´ì§€ ì•Šë‹¤. í•˜ì§€ë§Œ **ë‹¤ì–‘í•œ ë°ì´í„° ì†ŒìŠ¤ê°€ ì´í„°ë ˆì´ì…˜ í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•˜ë„ë¡ ê·œì •í•˜ë©´ ë°ì´í„° ì†Œë¹„ìëŠ” ì´í„°ë ˆì´ì…˜ í”„ë¡œí† ì½œë§Œì„ ì§€ì›í•˜ë„ë¡ êµ¬í˜„**í•˜ë©´ ëœë‹¤.

ì¦‰, ì´í„°ë ˆì´ì…˜ í”„ë¡œí† ì½œì€ ë‹¤ì–‘í•œ ë°ì´í„° ì†ŒìŠ¤ê°€ í•˜ë‚˜ì˜ ìˆœíšŒ ë°©ì‹ì„ ê°–ë„ë¡ ê·œì •í•˜ì—¬ ë°ì´í„° ì†Œë¹„ìê°€ íš¨ìœ¨ì ìœ¼ë¡œ ë‹¤ì–‘í•œ ë°ì´í„° ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ **ë°ì´í„° ì†Œë¹„ìì™€ ë°ì´í„° ì†ŒìŠ¤ë¥¼ ì—°ê²°í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ì˜ ì—­í• **ì„ í•œë‹¤.

ì´í„°ëŸ¬ë¸”ì„ ì§€ì›í•˜ëŠ” ë°ì´í„° ì†Œë¹„ìëŠ” ë‚´ë¶€ì—ì„œ Symbol.iterator ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•´ ì´í„°ë ˆì´í„°ë¥¼ ìƒì„±í•˜ê³  ì´í„°ë ˆì´í„°ì˜ next ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ì´í„°ëŸ¬ë¸”ì„ ìˆœíšŒí•œë‹¤. ê·¸ë¦¬ê³  next ë©”ì†Œë“œê°€ ë°˜í™˜í•œ ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´ì˜ value í”„ë¡œí¼í‹° ê°’ì„ ì·¨ë“í•œë‹¤.

## 2. forâ€¦of

---

forâ€¦of ë¬¸ì€ ë‚´ë¶€ì ìœ¼ë¡œ ì´í„°ë ˆì´í„°ì˜ next ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ì´í„°ëŸ¬ë¸”ì„ ìˆœíšŒí•˜ë©° next ë©”ì†Œë“œê°€ ë°˜í™˜í•œ ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´ì˜ value í”„ë¡œí„°í”¼ ê°’ì„ forâ€¦of ë¬¸ì˜ ë³€ìˆ˜ì— í• ë‹¹í•œë‹¤. ê·¸ë¦¬ê³  ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´ì˜ done í”„ë¡œí¼í‹° ê°’ì´ falseì´ë©´ ì´í„°ëŸ¬ë¸”ì˜ ìˆœíšŒë¥¼ ê³„ì†í•˜ê³  trueì´ë©´ ì´í„°ëŸ¬ë¸”ì˜ ìˆœíšŒë¥¼ ì¤‘ë‹¨í•œë‹¤.

## 3. Custom Iterable

---

### 3.1 êµ¬í˜„

---

ì¼ë°˜ ê°ì²´ëŠ” ì´í„°ëŸ¬ë¸” í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ forâ€¦ofë¬¸ì„ ìˆœíšŒí•  ìˆ˜ ì—†ë‹¤.

í•˜ì§€ë§Œ ì¼ë°˜ ê°ì²´ê°€ ì´í„°ë ˆì´ì…˜ í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•˜ë„ë¡ êµ¬í˜„í•˜ë©´ ì´í„°ëŸ¬ë¸”ì´ ëœë‹¤.

```jsx
const fibonacci = {
  [Symbol.iterator]() {
    let [pre, cur] = [0,1];
    // ìµœëŒ€ê°’
    const max = 10;

    // Symbol.iterator ë©”ì†Œë“œë¥¼ next ë©”ì†Œë“œë¥¼ ë¦¬í„´.
    // next ë©”ì†Œë“œëŠ” iterator resultë¥¼ ë¦¬í„´.
    return {
      // fibonacci ê°ì²´ë¥¼ ìˆœíšŒí•  ë•Œë§ˆë‹¤ next ë©”ì†Œë“œ í˜¸ì¶œ.
      next() {
        [pre,cur] = [cur, pre+cur];
        return {
          value : cur,
          done : cur >= max
        }
      }
    }
  }
}

for(const num of fibonacci) {
  console.log(num); // 1 2 3 5 8
}
```

```jsx
const arr = [...fibonacci];
console.log(arr); // [ 1, 2, 3, 5, 8 ]

const [first, second, ...rest] = fibonacci;
console.log(first, second, rest); // 1 2 [ 3, 5, 8 ]
```

### 3.2 ì´í„°ëŸ¬ë¸”ì„ ìƒì„±í•˜ëŠ” í•¨ìˆ˜

---

ìœ„ finbonacci ì´í„°ëŸ¬ë¸” ì™¸ë¶€ì—ì„œ ê°’ì„ ì „ë‹¬í•  ë°©ë²•ì´ ì—†ë‹¤ëŠ” ì•„ì‰¬ìš´ ì ì´ ìˆë‹¤.

ìµœëŒ€ê°’ì„ ì™¸ë¶€ì—ì„œ ì „ë‹¬í•  ìˆ˜ ìˆë„ë¡ ìˆ˜ì •í•˜ë©´

```jsx
const fibonacci = function (max) {
  let [pre,cur] = [0,1];
  return {
    [Symbol.iterator]() {
      let [pre, cur] = [0,1];
      return {
        next() {
          [pre,cur] = [cur, pre+cur];
          return {
            value : cur,
            done : cur >= max
          }
        }
      }
    }
  }
}
```

### 3.3 ì´í„°ëŸ¬ë¸”ì´ë©´ì„œ ì´í„°ë ˆì´í„°ì¸ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” í•¨ìˆ˜

---

ì´í„°ë ˆì´í„°ë¥¼ ìƒì„±í•˜ë ¤ë©´ ì´í„°ëŸ¬ë¸”ì˜ Symbol.iterator ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•´ì•¼ í•œë‹¤. ì´í„°ëŸ¬ë¸”ì´ë©´ì„œ ì´í„°ë ˆì´í„°ì¸ ê°ì²´ë¥¼ ìƒì„±í•˜ë©´ Symbol.iterator ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ì§€ ì•Šì•„ë„ ëœë‹¤.

```jsx
// iterëŠ” ì´í„°ëŸ¬ë¸”ì´ë©´ì„œ ì´í„°ë ˆì´í„°ì´ë‹¤.
let iter = fibonacciFunc(10);
```

iterëŠ” ì´í„°ëŸ¬ë¸”ì´ë©´ì„œ ì´í„°ë ˆì´í„°ì¸ ê°ì²´ì´ë‹¤.

Symbol.iterator ë©”ì†Œë“œëŠ” thisë¥¼ ë°˜í™˜í•˜ë¯€ë¡œ next ë©”ì†Œë“œë¥¼ ê°–ëŠ” ì´í„°ë ˆì´í„°ë¥¼ ë°˜í™˜í•œë‹¤.

```jsx
const fibonacci = function (max) {
  let [pre,cur] = [0,1];
  return {
    [Symbol.iterator]() {
      return this;
    },
    next() {
      [pre,cur] = [cur, pre+cur];
      return {
        value : cur,
        done : cur >= max
      }
    }
  }
}
```

### 3.4 ë¬´í•œ ì´í„°ëŸ¬ë¸”ê³¼ Lazy evaluation( ì§€ì—° í‰ê°€ )

ë¬´í•œ ì´í„°ëŸ¬ë¸”(infinite sequence)ì„ ìƒì„±í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì •ì˜í•´
ë¬´í•œ ìˆ˜ì—´(infinite sequence)ì„ ê°„ë‹¨íˆ í‘œí˜„í•  ìˆ˜ ìˆë‹¤.

```jsx
const fiboFunc = function() {
  let [pre, cur] = [0,1];
  return {
    [Symbol.iterator]() {
      return this;
    },
    next() {
      [pre, cur] = [cur, pre+cur];
      return { value : cur };
    }
  }
}

for(const num of fiboFunc()) {
  if (num > 10000) break;
  console.log(num); // 1 2 3 5 8 ...
}
```

ì´í„°ëŸ¬ë¸”ì€ ë°ì´í„° ê³µê¸‰ì(Data provider)ì˜ ì—­í• ì„ í•œë‹¤.
ë¹ŒíŠ¸ì¸ ì´í„°ëŸ¬ë¸”ì€ ë°ì´í„°ë¥¼ ëª¨ë‘ ë©”ëª¨ë¦¬ì— í™•ë³´í•œ ë‹¤ìŒ ë™ì‘í•œë‹¤.
í•˜ì§€ë§Œ ì´í„°ëŸ¬ë¸”ì€ **Lazy evaluation(ì§€ì—° í‰ê°€)**ë¥¼ í†µí•´ ê°’ì„ ìƒì„±í•œë‹¤.
Lazy evaluationì€ í‰ê°€ ê²°ê³¼ê°€ í•„ìš”í•  ë•Œê¹Œì§€ í‰ê°€ë¥¼ ëŠ¦ì¶”ëŠ” ê¸°ë²•ì´ë‹¤.

ìœ„ì˜ finboFunc í•¨ìˆ˜ëŠ” ë¬´í•œ ì´í„°ëŸ¬ë¸”ì„ ìƒì„±í•œë‹¤.
í•˜ì§€ë§Œ ë°ì´í„°ë¥¼ ê³µê¸‰í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜ì„ êµ¬í˜„í•œ ê²ƒì´ë¯€ë¡œ ë°ì´í„° ì†Œë¹„ì (forâ€¦ofë‚˜ ë¶„í•´ í• ë‹¹)ê°€ ì‹¤í–‰í•˜ê¸° ì „ê¹Œì§€ëŠ” ë°ì´í„°ë¥¼ ìƒì„±í•˜ì§€ ì•ŠëŠ”ë‹¤.

```
ğŸ’¡ ë°ì´í„°ê°€ í•„ìš”í•  ë•Œê¹Œì§€ ë°ì´í„°ì˜ ìƒì„±ì„ ì§€ì—°, ë°ì´í„°ê°€ í•„ìš”í•œ ìˆœê°„ ë°ì´í„°ë¥¼ ìƒì„±í•œë‹¤.
```

## Generator

---

function* = generator

yeild* = í¼ì³ì„œ yeild 1, yeild 2, yeild 3 ê°™ì´ í¼ì¹¨

```jsx
const arr = [1, 2, 3]
const map = new Map([['a', 1], ['b', 2], ['c', 3]])
const set = new Set([1, 2, 3])
const str = 'ì´ëŸ°ê²ƒë„ ëœë‹¤.'

const makeGenerator = iterable => function* () {
  yield* iterable
}
const arrGen = makeGenerator(arr)()
const mapGen = makeGenerator(map)()
const setGen = makeGenerator(set)()
const strGen = makeGenerator(str)()

console.log(arrGen.next())
console.log(mapGen.next())
console.log(...setGen)
console.log(...strGen)
```

## Iterableí•œ ê°œì²´ë¥¼ ì¸ìë¡œ ë°›ì„ ìˆ˜ ìˆëŠ” ê°œì²´

---

```jsx
new Map()
new Set()
new WeakMap()
new WeakSet()
Promise.all()
Promise.race()
Array.from()
```